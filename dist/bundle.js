(()=>{"use strict";let e,t,n,l,s,a;console.log("Hello, WOrld!"),window.onload=function(){e=document.getElementById("app"),t=document.getElementById("login"),n=document.getElementById("mapscreen"),l=document.getElementById("addnewaddress"),s=document.getElementById("updatedeleteaddress"),a=document.getElementById("contactlist"),o()};let d=[{username:"Louis",password:"aaa",isAdmin:!1,contacts:[{title:"Frau",gender:"W",firstName:"Alice",lastName:"A",street:"Musterstr. 1",zip:123456,city:"Berlin",country:"Deutschland",email:"alice@in-wonderland.com",others:"",private:!0},{title:"Herr",gender:"M",firstName:"Bob",lastName:"B",street:"Spainstr. 2",zip:456221,city:"Madrid",country:"Spanien",email:"bob@the-builder.com",others:"",private:!1}]},{username:"Julia",password:"aaa",isAdmin:!0,contacts:[{title:"",gender:"D",firstName:"Cat",lastName:"C",street:"Katzenstr. 2",zip:123421,city:"MÃ¼nchen",country:"Deutschland",email:"cute@cat.com",others:"",private:!1},{title:"Herr",gender:"M",firstName:"Daniel",lastName:"D",street:"Time Square",zip:213412,city:"New York",email:"daniel@wellington.de",country:"USA",others:"",private:!0}]}];const o=function(){n.style.display="none",l.style.display="none",s.style.display="none",t.style.display="block",document.querySelector("#login form").addEventListener("submit",(e=>{e.preventDefault();const t=document.getElementById("password").value,n=document.getElementById("username").value;if(r(t,n)){const{isAdmin:e}=B(n);i(n,e)}else{const e="Username or password is wrong",t=document.getElementById("login-error");t.textContent=e,t.style.margin="4px 0"}}))},i=function(e,a){t.style.display="none",l.style.display="none",s.style.display="none",n.style.display="block",document.getElementById("showminebtn").addEventListener("click",(t=>{u(e)})),document.getElementById("showallbtn").addEventListener("click",(t=>{m(e,a)})),document.getElementById("addnewbtn").addEventListener("click",(t=>{c(e,a)})),document.getElementById("logoutbtn").addEventListener("click",(e=>{o()})),u(e),console.log("help")},c=function(e,a){t.style.display="none",n.style.display="none",l.style.display="block",s.style.display="none",document.getElementById("updatebtn").style.display="none",document.getElementById("deletebtn").style.display="none",document.getElementById("addbtn").style.display="block";const d=document.querySelector("#addnewaddress form"),o=(d.getElementById("title").value,d.getElementById("gender").value,d.getElementById("first-name").value,d.getElementById("last-name").value,d.getElementById("street").value),c=d.getElementById("zip").value,r=d.getElementById("city").value,m=d.getElementById("country").value;d.getElementById("email").value,d.getElementById("others").value,d.getElementById("private").value,document.getElementById("addbtn").addEventListener("click",(e=>{e.preventDefault(),p(o,c,r,m)?E():i(currUser.username,currUser.isAdmin)})),document.getElementById("cancelbtn").addEventListener("click",(e=>{i(currUser.username,currUser.isAdmin)}))},r=function(e,t){return"Louis"===t||"Julia"===t},m=function(e,t){const n=B(e),l=d.map((n=>n.contacts.filter((l=>t||n.username===e?l:!l.private)))),s=_.flatten(l);y(s,n)},u=function(e){const t=B(e);if(!t)return;const{contacts:n}=t;y(n,t)},y=(e,a)=>{const d=document.getElementById("contactlist");g(d),e.forEach((e=>{const o=document.createElement("li");o.setAttribute("contactValue",JSON.stringify(e)),o.className="contact",o.textContent=e.firstName,d.appendChild(o),o.addEventListener("click",(()=>{console.log(e),function({title:e,gender:a,firstName:d,lastName:o,zip:c,street:r,city:m,country:u,email:y,others:g,isPrivate:p},E){t.style.display="none",n.style.display="none",l.style.display="block",document.getElementById("addbtn").style.display="none",s.style.display="none";const B=document.getElementById("title"),v=document.getElementById("gender"),I=document.getElementById("first-name"),f=document.getElementById("last-name"),h=document.getElementById("street"),b=document.getElementById("zip"),w=document.getElementById("city"),N=document.getElementById("country"),k=document.getElementById("email"),L=document.getElementById("others"),A=document.getElementById("private");B.value=e,v.value=a,I.value=d,f.value=o,h.value=r,b.value=c,w.value=m,N.value=u,k.value=y,L.value=g,A.value=p,document.getElementById("cancelbtn").addEventListener("click",(e=>{i(E.username,E.isAdmin)}))}(e,a)}))}))},g=e=>{e.innerHTML=""},p=function(e,t,n,l){const s=new XMLHttpRequest;let a="street="+e+"&city="+n+"&country="+l+"&postalcode="+t;s.open("GET","https://nominatim.openstreetmap.org/search?"+a+"&geocodejson"),s.send(),s.onreadystatechange=function(){return 4==this.readyState&&200==this.status&&(console.log(s.responseText),responseObject=this.responseXML,!0)}},E=function({title:e,gender:t,firstName:n,lastName:l,zip:s,city:a,country:d,email:o,others:i,isPrivate:c}){},B=function(e){const t=d.filter((t=>t.username===e));return 0===t.length?null:t[0]}})();